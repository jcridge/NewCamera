<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <!--<link rel="stylesheet" type="text/css" href="css/index.css" />-->
        <title>Camera Application</title>
        <style>
        </style>
    </head>
    <body onload="loadJS()">
        <div class="app">
            <div id="imageContainer">This will be replaced</div>
            
            <input type="button" value="Load Camera" onclick="getImage()">
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <script>
        var cameraOptions = {
            quality:50,
            sourceType : Camera.PictureSourceType.CAMERA,
            destinationType:Camera.DestinationType.FILE_URI,
            allowEdit: true,
            encodingType: Camera.EncodingType.JPEG,
            targetWidth:300,
            targetHeight:300
        };
            
        navigator.camera.getPicture( cameraSuccess, cameraError, [ cameraOptions ] );

        function loadJS(){
            document.addEventListener("deviceready", onDeviceReady,false);
        }

        function onDeviceReady(){
            navigator.notification.alert("onDeviceReady");
        }

        function chooseMedia(){
            navigator.notification.confirm("Would you like to take a photo or upload a pre-existing photo?", onDoConfirm, "Choose Media", "Camera, Gallery");
        }
        
        /*function onDoConfirm(btnNum){
            if(btnNum == "1"){
                takePhoto();
            }
            else{
                //alert("Gallery upload coming soon!");
                function getImage(){
                    // Retrieve image file location from specified source
                    navigator.camera.getPicture(onCapturePhotoSuccess, onCapturePhotoError,{ quality: 80, 
                        destinationType: navigator.camera.DestinationType.DATA_URL,
                        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                    });
                }

                function onCapturePhotoSuccess(imageURI) 
                {   
                    var ic = document.getElementById('imageContainer');
                        //smallImage.src = "data:image/jpeg;base64," + imageURI;
                        ic.innerHTML = '<img src="' + imageURL + '" width="30%" style="border-radius: 50%;"/>';
                }


                function onCapturePhotoError(e) 
                {
                    navigator.notification.alert('Captured Failed because: ' + e); 
                }
            }
        }
            
        function takePhoto(){
            navigator.camera.getPicture(onCameraSuccess,onCameraError);
        }

        function onCameraSuccess(imageURL){
            ic = document.getElementById('imageContainer');
            ic.innerHTML = '<img src="' + imageURL + '" width="30%" style="border-radius: 50%;"/>';
        }

        function onCameraError(e){
            navigator.notification.alert("onCameraError: " + e);
        }*/
            
        function getImage()
        {
            // Retrieve image file location from specified source
            navigator.camera.getPicture(onCapturePhotoSuccess, onCapturePhotoError,{ quality: 50, 
                destinationType: navigator.camera.DestinationType.DATA_URL,
                sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY,
                targetWidth:300,
                targetHeight:300                                                                    
            });
        }

        function onCapturePhotoSuccess(imageURI) 
        {   
            var smallImage = document.getElementById('imageContainer');
                //smallImage.src = "data:image/jpeg;base64," + imageURI;
                smallImage.innerHTML = '<img src="' + imageURI + '" width="30%" />';
        }

        function onCapturePhotoError(message) 
        {
            console.log('Captured Failed because: ' + message); 
        }
    </script>
    </body>
</html>
